
<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Каталог квітів</title>
</head>
<body>
  <div id="catalog">
    <!-- Картки квітів -->
    <div data-name="Cool Water">
      <span>Cool Water</span>
      <input type="number" min="0" value="0" onchange="updateOrder(this, 'Cool Water')" />
    </div>
    <div data-name="Red Panther">
      <span>Red Panther</span>
      <input type="number" min="0" value="0" onchange="updateOrder(this, 'Red Panther')" />
    </div>
    <div data-name="Tiffany">
      <span>Tiffany</span>
      <input type="number" min="0" value="0" onchange="updateOrder(this, 'Tiffany')" />
    </div>
  </div>

  <div id="nameInputSection" style="display: none;">
    <input type="text" id="customerName" placeholder="Ваше ім’я" />
  </div>

  <button onclick="showNameInput()">Замовити</button>

  <script>
    const order = {};
    let inputShown = false;

    function updateOrder(input, name) {
      const qty = parseInt(input.value);
      if (qty > 0) {
        order[name] = qty;
      } else {
        delete order[name];
      }
    }

    function showNameInput() {
      const inputSection = document.getElementById("nameInputSection");
      const input = document.getElementById("customerName");

      if (!inputShown) {
        inputSection.style.display = "block";
        inputShown = true;
      } else {
        const name = input.value.trim();
        if (!name) {
          alert("Введіть ім’я");
          return;
        }

        let message = "Хочу замовити:%0A";
        for (const [flower, qty] of Object.entries(order)) {
          message += `• ${flower}: ${qty} шт%0A`;
        }
        message += `%0AІм'я: ${name}`;

        const text = encodeURIComponent(message);
        const link = `viber://chat?number=+380674656284&text=${text}`;
        window.location.href = link;
      }
    }
  </script>
</body>
</html>
